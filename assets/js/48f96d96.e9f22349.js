"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[387],{602:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"angular","title":"Angular Integration","description":"mini-rx-store-ng is a package for better Angular Integration.","source":"@site/docs/angular.md","sourceDirName":".","slug":"/angular","permalink":"/docs/angular","draft":false,"unlisted":false,"editUrl":"https://github.com/spierala/mini-rx-store/edit/master/docs/docs/angular.md","tags":[],"version":"current","frontMatter":{"id":"angular","title":"Angular Integration","sidebar_label":"Angular Integration"},"sidebar":"docs","previous":{"title":"Logger","permalink":"/docs/ext-logger"}}');var o=r(4848),s=r(8453);const i={id:"angular",title:"Angular Integration",sidebar_label:"Angular Integration"},a=void 0,d={},c=[{value:"Usage",id:"usage",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Installation",id:"installation",level:3},{value:"Configure the store in the app module",id:"configure-the-store-in-the-app-module",level:3},{value:"Register feature reducers in Angular feature modules",id:"register-feature-reducers-in-angular-feature-modules",level:3},{value:"Register effects",id:"register-effects",level:3},{value:"Get hold of the store and actions via the Angular dependency injection",id:"get-hold-of-the-store-and-actions-via-the-angular-dependency-injection",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/mini-rx-store-ng",children:"mini-rx-store-ng"})," is a package for better Angular Integration."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/mini-rx-store-ng",children:(0,o.jsx)(n.img,{src:"https://badge.fury.io/js/mini-rx-store-ng.svg",alt:"npm version"})})}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["For modern Angular (with ",(0,o.jsx)(n.a,{href:"https://angular.dev/guide/signals",children:"Signals"})," and standalone) we recommend to use the ",(0,o.jsx)(n.a,{href:"https://github.com/spierala/mini-rx-store/blob/master/libs/signal-store/README.md",children:"MiniRx Signal Store"}),".\nSignal Store comes with first-class support for Signals and standalone APIs."]})}),"\n",(0,o.jsxs)(n.p,{children:["With ",(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/mini-rx-store-ng",children:"mini-rx-store-ng"})," we can use MiniRx Store the Angular way:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#configure-the-store-in-the-app-module",children:"Configure the store"})," using ",(0,o.jsx)(n.code,{children:"StoreModule.forRoot()"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#register-feature-reducers-in-angular-feature-modules",children:"Register feature reducers"})," using ",(0,o.jsx)(n.code,{children:"StoreModule.forFeature()"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#register-effects",children:"Register effects"})," using ",(0,o.jsx)(n.code,{children:"EffectsModule.register()"})," and ",(0,o.jsx)(n.code,{children:"createEffect()"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"#get-hold-of-the-store-and-actions-via-the-angular-dependency-injection",children:"Use Angular Dependency Injection"})," for ",(0,o.jsx)(n.code,{children:"Store"})," and ",(0,o.jsx)(n.code,{children:"Actions"})]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Angular >= 17"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"npm i mini-rx-store-ng"})}),"\n",(0,o.jsx)(n.h3,{id:"configure-the-store-in-the-app-module",children:"Configure the store in the app module"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="app.module.ts"',children:"import { NgModule } from '@angular/core';\nimport { StoreModule } from 'mini-rx-store-ng';\n\n@NgModule({\n  imports: [\n    StoreModule.forRoot({\n      extensions: [\n        // Add extensions here\n        // new LoggerExtension()\n      ],\n      reducers: {\n        // Add feature reducers here\n        // todo: todoReducer\n      },\n      metaReducers: [\n        // Add meta reducers here\n      ]\n    }),\n  ]\n})\nexport class AppModule {}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"register-feature-reducers-in-angular-feature-modules",children:"Register feature reducers in Angular feature modules"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="todo.module.ts"',children:"import { NgModule } from '@angular/core';\nimport { StoreModule } from 'mini-rx-store-ng';\nimport todoReducer from './todo-reducer';\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature('todo', todoReducer),\n  ]\n})\nexport class TodoModule {}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"register-effects",children:"Register effects"}),"\n",(0,o.jsx)(n.p,{children:'Create an Angular service which holds all effects which belong to a specific feature module (e.g. "todo"):'}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="todo-effects.service.ts"',children:"import { Injectable } from '@angular/core';\n\nimport { Actions, createEffect, ofType, mapResponse } from 'mini-rx-store';\n\nimport { ajax } from 'rxjs/ajax';\nimport { mergeMap } from 'rxjs/operators';\n\nimport { LoadTodosFail, LoadTodosSuccess, TodoActionTypes } from './todo-actions';\nimport { Todo } from './todo';\n\n@Injectable()\nexport class TodoEffects {\n  loadTodos$ = createEffect(\n    this.actions$.pipe(\n      ofType(TodoActionTypes.LoadTodos),\n      mergeMap(() =>\n        ajax<Todo[]>('https://jsonplaceholder.typicode.com/todos').pipe(\n          tap(v => v),\n          mapResponse(\n            (res) => new LoadTodosSuccess(res.response),\n            (err) => new LoadTodosFail(err)\n          )\n        )\n      )\n    )\n  );\n\n  constructor(private actions$: Actions) {}\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Register the effects with ",(0,o.jsx)(n.code,{children:"EffectsModule.register"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="todo.module.ts"',children:"import { NgModule } from '@angular/core';\n\nimport { EffectsModule, StoreModule } from 'mini-rx-store-ng';\n\nimport { TodoEffects } from './todo-effects.service';\nimport { todoReducer } from './todo-reducer';\n\n@NgModule({\n  imports: [\n    StoreModule.forFeature('todo', todoReducer),\n    EffectsModule.register([TodoEffects]),\n  ]\n})\nexport class TodoModule {}\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"EffectsModule.register"})," accepts an array of classes which contain effects.\nIt can be used in the root module and in feature modules."]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["When using ",(0,o.jsx)(n.code,{children:"EffectsModule.register"}),", you ",(0,o.jsx)(n.strong,{children:"must"})," write the effect with ",(0,o.jsx)(n.code,{children:"createEffect"}),". Otherwise, the effect will be ignored."]})}),"\n",(0,o.jsx)(n.h3,{id:"get-hold-of-the-store-and-actions-via-the-angular-dependency-injection",children:"Get hold of the store and actions via the Angular dependency injection"}),"\n",(0,o.jsxs)(n.p,{children:["After we registered the StoreModule in the AppModule, we can use Angular DI to access ",(0,o.jsx)(n.code,{children:"Store"})," and ",(0,o.jsx)(n.code,{children:"Actions"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"For example in a component:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { Component } from '@angular/core';\nimport { Store } from 'mini-rx-store';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'my-component',\n  template: ''\n})\nexport class MyComponent {\n  // Select state from the Store\n  someState$: Observable<any> = this.store.select(state => state);\n\n  constructor(private store: Store) {}\n\n  doSomething() {\n    this.store.dispatch({type: 'some action'})\n  }\n}\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>a});var t=r(6540);const o={},s=t.createContext(o);function i(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);