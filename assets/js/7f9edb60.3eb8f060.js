"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[594],{2367:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"fs-setup","title":"Create a Feature Store","description":"There are 2 Options to create a new Feature Store.","source":"@site/docs/fs-setup.md","sourceDirName":".","slug":"/feature-store-setup","permalink":"/docs/feature-store-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/spierala/mini-rx-store/edit/master/docs/docs/fs-setup.md","tags":[],"version":"current","frontMatter":{"id":"fs-setup","title":"Create a Feature Store","sidebar_label":"Setup","slug":"/feature-store-setup"},"sidebar":"docs","previous":{"title":"Quick Start","permalink":"/docs/fs-quick-start"},"next":{"title":"Update State","permalink":"/docs/update-feature-state"}}');var i=n(4848),a=n(8453);const r={id:"fs-setup",title:"Create a Feature Store",sidebar_label:"Setup",slug:"/feature-store-setup"},s=void 0,d={},c=[{value:"Option 1: Extend <code>FeatureStore</code>",id:"option-1-extend-featurestore",level:3},{value:"Option 2: Functional creation method",id:"option-2-functional-creation-method",level:3},{value:"Lazy state initialization with <code>setInitialState</code>",id:"lazy-state-initialization-with-setinitialstate",level:2}];function l(e){const t={admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"There are 2 Options to create a new Feature Store."}),"\n",(0,i.jsxs)(t.h3,{id:"option-1-extend-featurestore",children:["Option 1: Extend ",(0,i.jsx)(t.code,{children:"FeatureStore"})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:'title="todo-feature-store.ts"',children:"import { FeatureStore } from 'mini-rx-store';\nimport { Todo } from './todo';\n\nexport interface TodoState {\n  todos: Todo[];\n  selectedTodoId: number\n}\n\nexport const initialState: TodoState = {\n  todos: [],\n  selectedTodoId: undefined\n};\n\nexport class TodoFeatureStore extends FeatureStore<TodoState> {\n  constructor() {\n    super('todo', initialState)\n  }\n}\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Extending the ",(0,i.jsx)(t.code,{children:"FeatureStore"})," requires to pass the feature key (e.g. 'todo') and the initial state.\nWe have to provide a TypeScript interface to ",(0,i.jsx)(t.code,{children:"FeatureStore"})," to get type safety: ",(0,i.jsx)(t.code,{children:"FeatureStore<TodoState>"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"option-2-functional-creation-method",children:"Option 2: Functional creation method"}),"\n",(0,i.jsxs)(t.p,{children:["We can create a Feature Store with ",(0,i.jsx)(t.code,{children:"createFeatureStore"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"const todoFs: FeatureStore<TodoState> = createFeatureStore<TodoState>('todo', initialState);\n"})}),"\n",(0,i.jsx)(t.p,{children:"The following examples will be based on Option 1 (Extend)."}),"\n",(0,i.jsxs)(t.h2,{id:"lazy-state-initialization-with-setinitialstate",children:["Lazy state initialization with ",(0,i.jsx)(t.code,{children:"setInitialState"})]}),"\n",(0,i.jsxs)(t.p,{children:["In some situations, you do not know yet the initialState when creating a Feature Store.\nFor that reason you can initialize the state later with ",(0,i.jsx)(t.code,{children:"setInitialState"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"Example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"export class TodoFeatureStore extends FeatureStore<TodoState> {\n  constructor() {\n    super('todo', undefined); // Initial state is undefined! \n  }\n  \n  // Called later\n  init(initialState: TodoState) {\n    this.setInitialState(initialState);\n  }\n}\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["An error will be thrown, if you call ",(0,i.jsx)(t.code,{children:"setState"})," before an initial state was set (via the constructor or ",(0,i.jsx)(t.code,{children:"setInitialState"}),")."]})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var o=n(6540);const i={},a=o.createContext(i);function r(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);