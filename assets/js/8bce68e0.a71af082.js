"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[888],{7041:(t,o,e)=>{e.r(o),e.d(o,{assets:()=>i,contentTitle:()=>r,default:()=>p,frontMatter:()=>c,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"ts-action","title":"ts-action","description":"MiniRx supports writing and consuming actions with ts-action to reduce boilerplate code.","source":"@site/docs/ts-action.md","sourceDirName":".","slug":"/ts-action","permalink":"/docs/ts-action","draft":false,"unlisted":false,"editUrl":"https://github.com/spierala/mini-rx-store/edit/master/docs/docs/ts-action.md","tags":[],"version":"current","frontMatter":{"id":"ts-action","title":"ts-action","slug":"/ts-action"},"sidebar":"docs","previous":{"title":"Effects","permalink":"/docs/effects"},"next":{"title":"Quick Start","permalink":"/docs/fs-quick-start"}}');var s=e(4848),a=e(8453);const c={id:"ts-action",title:"ts-action",slug:"/ts-action"},r=void 0,i={},d=[{value:"Create actions:",id:"create-actions",level:4},{value:"Dispatch an action:",id:"dispatch-an-action",level:4},{value:"Reducer",id:"reducer",level:4},{value:"Effects",id:"effects",level:4}];function l(t){const o={a:"a",code:"code",h4:"h4",p:"p",pre:"pre",...(0,a.R)(),...t.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.p,{children:["MiniRx supports writing and consuming actions with ",(0,s.jsx)(o.a,{href:"https://www.npmjs.com/package/ts-action",children:"ts-action"})," to reduce boilerplate code."]}),"\n",(0,s.jsxs)(o.p,{children:["There are also ",(0,s.jsx)(o.a,{href:"https://www.npmjs.com/package/ts-action-operators",children:"ts-action-operators"})," to consume actions in effects."]}),"\n",(0,s.jsx)(o.p,{children:"Install the packages using npm:"}),"\n",(0,s.jsx)(o.p,{children:(0,s.jsx)(o.code,{children:"npm install ts-action ts-action-operators"})}),"\n",(0,s.jsx)(o.h4,{id:"create-actions",children:"Create actions:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",metastring:'title="ts-todo-actions.ts"',children:"import { action, payload } from 'ts-action';\nimport { Todo } from './todo';\n\nexport const addTodo = action('ADD_TODO', payload<Todo>());\nexport const loadTodos = action('LOAD_TODOS');\nexport const loadTodosSuccess = action('LOAD_TODOS_SUCCESS', payload<Todo[]>());\nexport const loadTodosFail = action('LOAD_TODOS_FAIL', payload<Error>());\n"})}),"\n",(0,s.jsx)(o.h4,{id:"dispatch-an-action",children:"Dispatch an action:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",children:"store.dispatch(addTodo({id: 1, title: 'Use Redux'}))\n"})}),"\n",(0,s.jsx)(o.h4,{id:"reducer",children:"Reducer"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",children:"import { on, reducer } from 'ts-action';\n\nexport interface TodoState {\n  todos: Todo[];\n}\n\nexport const initialState: TodoState = {\n  todos: [],\n};\n\nexport const todoReducer = reducer(\n  initialState,\n  on(addTodo, (state, {payload}) => ({...state, todos: [...state.todos, payload]}))\n);\n"})}),"\n",(0,s.jsx)(o.h4,{id:"effects",children:"Effects"}),"\n",(0,s.jsx)(o.p,{children:"Consume actions in effects"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-ts",children:"import { actions$ } from 'mini-rx-store';\n\nimport { mergeMap, map, catchError } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\nimport { of } from 'rxjs';\n\nimport { ofType } from 'ts-action-operators';\n\nimport { loadTodos, loadTodosFail, loadTodosSuccess } from './ts-todo-actions';\n\nconst loadEffect = actions$.pipe(\n  ofType(loadTodos), // Use ofType from 'ts-action-operators'\n  mergeMap(() =>\n    ajax('https://jsonplaceholder.typicode.com/todos').pipe(\n      map(res => loadTodosSuccess(res.response)),\n      catchError(err => of(loadTodosFail(err)))\n    )\n  )\n);\n\n// Register the effect\nstore.effect(loadEffect);\n\n// Trigger the effect\nstore.dispatch(loadTodos())\n"})})]})}function p(t={}){const{wrapper:o}={...(0,a.R)(),...t.components};return o?(0,s.jsx)(o,{...t,children:(0,s.jsx)(l,{...t})}):l(t)}},8453:(t,o,e)=>{e.d(o,{R:()=>c,x:()=>r});var n=e(6540);const s={},a=n.createContext(s);function c(t){const o=n.useContext(a);return n.useMemo((function(){return"function"==typeof t?t(o):{...o,...t}}),[o,t])}function r(t){let o;return o=t.disableParentContext?"function"==typeof t.components?t.components(s):t.components||s:c(t.components),n.createElement(a.Provider,{value:o},t.children)}}}]);